/*! lifebetter-suite-goal-model 2014-02-06 */
var clientUtil=function(){"use strict";return{bindGoalView:function(a,b){return a.comments.length>0?$("#"+b).removeClass("hidden"):$("#"+b).addClass("hidden"),a}}}();!function(){"use strict";var a=function(a,b,c){a.action="Create",a.goal={createDate:new Date},a.save=function(){b.post("/goals",{goal:a.goal}).success(function(){c.path("/")})}};a.$inject=["$scope","$http","$location","$routeParams"];var b=function(a,b,c,d){var e=d.id;b.get("/goals/"+e).success(function(b){a.goal=b.goal,a.action="Update"}),a.save=function(){b.put("/goals/"+e,{goal:a.goal}).success(function(){c.path("/")})}};b.$inject=["$scope","$http","$location","$routeParams"];var c=function(a,b,c){b.get("/goals").success(function(b){a.goals=b.goals}),a.deleteGoal=function(){if(window.confirm("Are you sure to delete this goal?")){var a=this.goal._id;b.delete("/goals/"+a).success(function(){$("#item_"+a).fadeOut()})}},a.finishGoal=function(){var a=this.goal._id;b.get("/goals/"+a).success(function(d){var e=d.goal;e.status="Finished",b.put("/goals/"+a,{goal:e}).success(function(){c.path("/list")})})},a.home=function(){c.url("/")}};c.$inject=["$scope","$http","$location","$routeParams"];var d=function(a,b,c,d){var e=d.id;b.get("/goals/"+e).success(function(b){a.goal=clientUtil.bindGoalView(b.goal,"notes")}),a.toggleAddNoteForm=function(){var b=$("#add-note-form");b.hasClass("hidden")?($("#add-note-form").removeClass("hidden"),$("#add-note-form").fadeIn(),a.comment={date:new Date,content:null}):($("#add-note-form").addClass("hidden"),$("#add-note-form").fadeOut())},a.saveNote=function(){b.post("/notes/"+e,{comment:a.comment}).success(function(){a.toggleAddNoteForm(),b.get("/goals/"+e).success(function(b){a.goal=clientUtil.bindGoalView(b.goal,"notes")})})},a.deleteNote=function(){if(window.confirm("Are you sure to delete this note?")){var c=this.comment._id;b.delete("/notes/"+e+"/"+c).success(function(){b.get("/goals/"+e).success(function(b){a.goal=clientUtil.bindGoalView(b.goal,"notes")})})}}};d.$inject=["$scope","$http","$location","$routeParams"],angular.module("goal",["ngRoute"]).config(["$routeProvider","$locationProvider",function(e,f){e.when("/",{templateUrl:"/partials/list",controller:c}).when("/list",{templateUrl:"/partials/list",controller:c}).when("/delete/:id",{templateUrl:"/partials/delete",controller:c}).when("/add",{templateUrl:"/partials/edit",controller:a}).when("/edit/:id",{templateUrl:"/partials/edit",controller:b}).when("/view/:id",{templateUrl:"/partials/view",controller:d}).otherwise({redirectTo:"/"}),f.html5Mode(!0)}])}();